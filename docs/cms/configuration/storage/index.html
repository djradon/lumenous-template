<!doctype html><html data-theme=light lang=en><script>const root=document.firstElementChild;const mediaQuery=`(prefers-color-scheme: dark)`;const mediaMatch=window.matchMedia;const currentMode=mediaMatch(mediaQuery).matches;const storeTheme=a=>{let b=`data-theme`;if(`boolean`===typeof a){a=a?`dark`:`light`};root.setAttribute(b,a);localStorage.setItem(b,a)};const storedTheme=`data-theme` in localStorage?localStorage.getItem(`data-theme`):currentMode;storedTheme&&storeTheme(storedTheme)</script><meta charset=UTF-8><meta content="IE=edge"http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0"name=viewport><title>Storage - Lume</title><meta content="light dark"name=supported-color-schemes><link crossorigin href=https://cdn.jsdelivr.net rel=preconnect><link crossorigin href=https://cdn.jsdelivr.net rel=dns-prefetch><link href=/styles/main.css rel=stylesheet><link href=http://localhost:3000/cms/configuration/storage/ rel=canonical><link href=/styles/pages/docs.css rel=stylesheet><script src=/main.js type=module></script><link integrity="sha256-brWyd+lKlaU/B5Lhqd/FUXyZQu4rVmbFRsP2E8S2CLw="crossorigin href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.2.1/dist/style.css rel=stylesheet><link href=/favicon.ico rel=icon sizes=48x48><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon.svg rel=icon sizes=any type=image/svg+xml><meta content=website property=og:type><meta content=Storage property=og:title><meta content="Setup different storages for your CMS"property=og:description><meta content=http://localhost:3000/cms/configuration/storage/ property=og:url><meta content=http://localhost:3000/avatar.png property=og:image><meta content=summary_large_image name=twitter:card><meta content="Setup different storages for your CMS"name=description><meta content=orange name=theme-color><meta content="Lume v2.4.2"name=generator><body><nav class=navbar-container><div class=navbar><a aria-label="Return home"class=navbar-logo href=/> <svg viewbox="0 0 50 50"height=50 width=50 xmlns=http://www.w3.org/2000/svg><rect fill=black fill-opacity=0.0 height=50 width=50 x=0 y=0></rect><path d="M17.53,0.152c-0.324-0.202-0.736-0.202-1.061,0C16.124,0.368,8,5.532,8,13 c0,1.799,0.544,3.558,1.546,5.04l-9.253,9.253c-0.391,0.391-0.391,1.023,0,1.414l3,3C3.488,31.902,3.744,32,4,32 s0.512-0.098,0.707-0.293L14.714,21.7C15.465,21.899,16.231,22,17,22c4.963,0,9-4.038,9-9C26,5.532,17.876,0.368,17.53,0.152z M12.712,17.996c0.122,0.28,0.292,0.543,0.52,0.772c0.229,0.229,0.493,0.399,0.773,0.521L3.854,29.439l-1.293-1.293L12.712,17.996z M15,18.5c-0.4,0-0.777-0.156-1.061-0.44C13.656,17.777,13.5,17.401,13.5,17s0.156-0.777,0.44-1.06l2-2 c0.283-0.283,0.66-0.44,1.06-0.44s0.777,0.156,1.061,0.44c0.283,0.283,0.439,0.66,0.439,1.06s-0.156,0.777-0.44,1.06l-2,2 C15.777,18.344,15.4,18.5,15,18.5z M17,20c-0.667,0-1.331-0.115-1.983-0.309l0.213-0.213c0.561-0.052,1.108-0.281,1.538-0.71l2-2 c0.977-0.976,0.977-2.559,0-3.535C18.279,12.744,17.64,12.5,17,12.5s-1.279,0.244-1.768,0.732l-2,2 c-0.43,0.43-0.659,0.978-0.711,1.539l-0.828,0.828C11.052,16.599,10,15.431,10,13c0-5.35,5.285-9.563,7.001-10.79 C18.717,3.434,24,7.636,24,13C24,16.86,20.859,20,17,20z"transform="translate(10, 8) scale(1.1)"class=blueprint_een fill=orange></path><rect fill=none height=46 rx=8 ry=8 stroke=white stroke-width=2 width=46 x=2 y=2></rect></svg> <span>lumenous-template</span> </a><ul class=navbar-menu><li><a class=is-selected href=/cms/> CMS </a><li><a href=/showcase/> Showcase </a><li><a href=/themes/> Themes </a><li><a href=/plugins/> Plugins </a><li><a href=/blog/> Blog </a></ul><div class=navbar-search id=search>Search</div></div></nav><div><div class=doc><nav class=doc-navbar><details class=doc-navbar-section open><summary><span class=doc-navbar-section-title>Configuration</span></summary> <ul class=doc-navbar-section-links><li><a title="Configure LumeCMS instance"href=/cms/configuration/options/>Options</a><li><a title="Setup different storages for your CMS"aria-current=page href=/cms/configuration/storage/>Storage</a><li><a title="Setup different collections for your CMS"href=/cms/configuration/collections/>Collections</a><li><a title="Show/hide fields while editing the content"href=/cms/configuration/views/>Views</a><li><a title="Setup individual documents to be edited in the CMS"href=/cms/configuration/documents/>Documents</a><li><a title="List of all fields available by default."href=/cms/configuration/fields/>Fields</a><li><a title="How to create custom fields"href=/cms/configuration/custom_fields/>Custom fields</a><li><a title="Setup folders to upload files by the CMS"href=/cms/configuration/uploads/>Uploads</a></ul></details><details class=doc-navbar-section><summary><span class=doc-navbar-section-title>Fields</span></summary> <ul class=doc-navbar-section-links><li><a title="Field to use Gutenberg blocks"href=/cms/fields/blocks/>Blocks</a><li><a title="Field to store boolean values"href=/cms/fields/checkbox/>Checkbox</a><li><a title="Field to store a list of different object elements"href=/cms/fields/choose-list/>Choose list</a><li><a title="Field to store code content"href=/cms/fields/code/>Code</a><li><a title="Field to store color values"href=/cms/fields/color/>Color</a><li><a title="Field to store the current date time"href=/cms/fields/current-datetime/>Current datetime</a><li><a title="Field to store date values"href=/cms/fields/date/>Date</a><li><a title="Field to store date time values"href=/cms/fields/datetime/>Datetime</a><li><a title="Field to store email values"href=/cms/fields/email/>Email</a><li><a title="Field to upload and store files"href=/cms/fields/file/>File</a><li><a title="Field to store invisible values"href=/cms/fields/hidden/>Hidden</a><li><a title="Field to store a list of string elements"href=/cms/fields/list/>List</a><li><a title="Field to store markdown content"href=/cms/fields/markdown/>Markdown</a><li><a title="Field to store numeric values"href=/cms/fields/number/>Number</a><li><a title="Field to group other fields under a name"href=/cms/fields/object/>Object</a><li><a title="Field to store a list of object elements"href=/cms/fields/object-list/>Object list</a><li><a title="Field to pick one of multiple options"href=/cms/fields/radio/>Radio</a><li><a title="Field to pick one of multiple options"href=/cms/fields/select/>Select</a><li><a title="Field to store short string values"href=/cms/fields/text/>Text</a><li><a title="Field to store long string values"href=/cms/fields/textarea/>Textarea</a><li><a title="Field to store time values"href=/cms/fields/time/>Time</a><li><a title="Field to store url values"href=/cms/fields/url/>Url</a></ul></details><details class=doc-navbar-section><summary><span class=doc-navbar-section-title>Deployment</span></summary> <ul class=doc-navbar-section-links><li><a title="How to setup LumeCMS to use it on Deno Deploy"href=/cms/deployment/deno-deploy/>Deploy on Deno Deploy</a><li><a title="How to setup LumeCMS on a VPS with live preview and versioning."href=/cms/deployment/vps/>Deploy on a VPS</a></ul></details></nav><main class=doc-content><header class=doc-header><h1>Storage</h1><p>Setup different storages for your CMS<nav class=toc><ol><li><a href=#file-system>File system</a><li><a href=#kv>KV</a><li><a href=#github>GitHub</a> <ul><li><a href=#generate-a-github-access-token>Generate a GitHub access token</a></ul></ol></nav></header><div class=doc-body><p>The function <code>cms.storage()</code> allows to register different storages to save the site data. When a storage is registered, it must have a name that will be used later in your documents, collections and uploads.<p>LumeCMS supports several types of storages.<h2 id=file-system tabindex=-1><a class=header-anchor href=#file-system>File system</a></h2><div class="markdown-alert markdown-alert-tip"><p class=markdown-alert-title>Tip<p>Lume automatically configure the <code>src</code> storage pointing to the <code>src</code> folder. So you don't need to setup a file system storage.</div><p>To register a filesystem storage, import the class and register it with a name. For example, let's register a file system storage under the name "my_files", pointing to the <code>./files</code> folder:<pre><code class="language-ts hljs language-typescript"><span class=hljs-keyword>import</span> lumeCMS, { <span class="hljs-title class_">Fs</span> } <span class=hljs-keyword>from</span> <span class=hljs-string>"lume/cms.ts"</span>;

<span class=hljs-keyword>const</span> cms = <span class="hljs-title function_">lumeCMS</span>();
<span class=hljs-keyword>const</span> root = <span class="hljs-title class_">Deno</span>.<span class="hljs-title function_">cwd</span>() + <span class=hljs-string>"/files"</span>;

cms.<span class="hljs-title function_">storage</span>(<span class=hljs-string>"my_files"</span>, <span class=hljs-keyword>new</span> <span class="hljs-title class_">Fs</span>({ root }));

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> cms;
</code></pre><p>The <code>my_files</code> storage is now available to read and write content by the CMS. Because the file system is the most common way to read and write data, the example above can be simplified as following:<pre><code class="language-ts hljs language-typescript"><span class=hljs-keyword>import</span> lumeCMS <span class=hljs-keyword>from</span> <span class=hljs-string>"lume/cms.ts"</span>;

<span class=hljs-keyword>const</span> cms = <span class="hljs-title function_">lumeCMS</span>();

cms.<span class="hljs-title function_">storage</span>(<span class=hljs-string>"my_files"</span>, <span class=hljs-string>"files"</span>);

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> cms;
</code></pre><p>As you can see, if you define a string as the storage, LumeCMS assume it's a folder name, so the file system storage is used automatically. Note also that you don't need to prepend <code>Deno.cwd()</code> to the folder name, because the value of <a href=/cms/configuration/options/#root>root option</a> (which by default is <code>Deno.cwd()</code>) is used as the base path.<h2 id=kv tabindex=-1><a class=header-anchor href=#kv>KV</a></h2><p><a href=https://docs.deno.com/deploy/kv/manual>Deno Kv</a> is a key-value database built directly into the Deno runtime. LumeCMS can use a <code>Kv</code> instance to store content. For example:<pre><code class="language-ts hljs language-typescript"><span class=hljs-keyword>import</span> lumeCMS, { <span class="hljs-title class_">Kv</span> } <span class=hljs-keyword>from</span> <span class=hljs-string>"lume/cms.ts"</span>;

<span class=hljs-keyword>const</span> cms = <span class="hljs-title function_">lumeCMS</span>();
<span class=hljs-keyword>const</span> kv = <span class=hljs-keyword>await</span> <span class="hljs-title class_">Deno</span>.<span class="hljs-title function_">openKv</span>();

cms.<span class="hljs-title function_">storage</span>(<span class=hljs-string>"my_values"</span>, <span class=hljs-keyword>new</span> <span class="hljs-title class_">Kv</span>({ kv }));

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> cms;
</code></pre><h2 id=github tabindex=-1><a class=header-anchor href=#github>GitHub</a></h2><p>Allows to write and read values directly from a GitHub repository using the GitHub API. It's useful if you want to allow people without GitHub accounts or permission to edit the site data.<pre><code class="language-ts hljs language-typescript"><span class=hljs-keyword>import</span> lumeCMS, { <span class="hljs-title class_">GitHub</span> } <span class=hljs-keyword>from</span> <span class=hljs-string>"lume/cms.ts"</span>;
<span class=hljs-keyword>import</span> { <span class="hljs-title class_">Octokit</span> } <span class=hljs-keyword>from</span> <span class=hljs-string>"npm:octokit"</span>;

<span class=hljs-keyword>const</span> cms = <span class="hljs-title function_">lumeCMS</span>();

<span class=hljs-keyword>const</span> client = <span class=hljs-keyword>new</span> <span class="hljs-title class_">Octokit</span>({
  <span class=hljs-attr>auth</span>: <span class=hljs-string>"xxx"</span>, <span class=hljs-comment>// A personal access token,</span>
});

cms.<span class="hljs-title function_">storage</span>(
  <span class=hljs-string>"gh"</span>,
  <span class=hljs-keyword>new</span> <span class="hljs-title class_">GitHub</span>({
    client,
    <span class=hljs-attr>owner</span>: <span class=hljs-string>"username"</span>,
    <span class=hljs-attr>repo</span>: <span class=hljs-string>"example"</span>,
  }),
);

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> cms;
</code></pre><h3 id=generate-a-github-access-token tabindex=-1><a class=header-anchor href=#generate-a-github-access-token>Generate a GitHub access token</a></h3><ol><li>Log into <a href=https://github.com>GitHub</a> and make sure you have permissions to manage the repository.<li>Go to <a href="https://github.com/settings/tokens?type=beta"title="Settings > Developer settings > Personal access tokens > Fine-grained tokens">Fine-grained tokens</a> and press <strong>Generate new token</strong>.<li>Set a name and expiration date for the token.<li>In <em>Repository access</em> section, select <strong>Only select repositories</strong> and add the repository that you want to manage.<li>Open <em>Repository permissions</em> and select <strong>Read and write</strong> access level in the <strong>Contents</strong> section.<li>Press the <strong>Generate token</strong>.</ol></div><footer class=doc-footer><ul class=doc-pagination></ul></footer></main></div></div><div class=footer-container><footer class=footer><ul class=footer-links><li><a href=https://github.com/lumeland> <svg viewbox="0 0 24 24"role=img xmlns=http://www.w3.org/2000/svg><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg> Github </a></ul><p class=footer-copyright>Crafted with ♥️ by <a href=https://oscarotero.com/>Óscar Otero</a> — <button title="Toggle light & dark theme"aria-label=auto aria-live=polite class=button-theme id=switch-theme><span class=is-light>Light theme</span> <span class=is-dark>Dark theme</span></button></footer></div><script integrity="sha256-7XYP2JLQrbyOqBKrAn8sT3l8PG/v2j6C3A5EyBDp9to="crossorigin defer src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.2.1/dist/umd/index.js></script><script>window.addEventListener(`DOMContentLoaded`,()=>{let a=`light`;document.getElementById(`switch-theme`).addEventListener(`click`,b=>{const c=localStorage.getItem(`data-theme`)==a||getComputedStyle(root).getPropertyValue(`color-scheme`)==a;storeTheme(!!c)});mediaMatch(mediaQuery).addEventListener(`change`,a=>{storeTheme(a.matches)});docsearch({appId:`O7U42EOTRQ`,apiKey:`bcb89a19824e0100724bc16011dea6f8`,indexName:`lume`,container:document.getElementById(`search`),debug:!1})},!1)</script>